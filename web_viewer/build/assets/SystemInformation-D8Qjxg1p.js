import{j as s,u as o,r as x}from"./index-BShE1WCg.js";import{G as i}from"./GeneralValue-Bm8Yb_03.js";function d({label:a,pValue:l,vValue:e}){return s.jsxs("div",{className:"power-item row",children:[s.jsx("div",{className:"power-title flex-1",children:a}),s.jsxs("div",{className:"power-value flex-1",children:[s.jsx("strong",{children:l})," W"]}),e!==void 0?s.jsxs("div",{className:"power-value flex-1",children:[s.jsx("strong",{children:e})," V"]}):s.jsx("span",{className:"power-value flex-1"})]})}function f({inverterData:a,isSocketConnected:l}){const{t:e}=o();return s.jsxs("div",{className:"pv flex-1",children:[s.jsxs("div",{className:"icon col align-center",children:[s.jsxs("div",{className:"col align-center",children:[s.jsx(i,{className:"show-small",value:l?a.p_pv:0,unit:" W"}),s.jsx("img",{src:"/assets/icon_solor_yielding.png"})]}),s.jsx("div",{className:`y-arrow ${a.p_pv==0||!l?"none":""}`})]}),s.jsxs("div",{className:"pv-texts power flex-1",children:[s.jsx(d,{label:e("PV1"),pValue:l?a.p_pv_1:0,vValue:l?a.v_pv_1:0}),s.jsx(d,{label:e("PV2"),pValue:l?a.p_pv_2:0,vValue:l?a.v_pv_2:0}),s.jsx(d,{label:e("totalPV"),pValue:l?a.p_pv:0})]})]})}function w({inverterData:a,isSocketConnected:l}){return s.jsx("div",{className:"battery flex-1",children:s.jsxs("div",{className:"row align-center",children:[s.jsxs("div",{className:"battery-texts",children:[s.jsx(i,{value:l?a.p_discharge||a.p_charge:0,unit:" W"}),s.jsx(i,{value:l?a.soc:0,unit:"%"}),s.jsx(i,{value:l?a.v_bat:0,unit:" Vdc"})]}),s.jsxs("div",{className:"col align-center",children:[s.jsx(i,{className:"show-small",value:l?a.p_discharge||a.p_charge:0,unit:" W"}),s.jsx("img",{className:"battery-icon",src:`/assets/icon_battery_${l?Math.round(a.soc/2/10):0}_green.png`}),s.jsx(i,{className:"show-small",value:l?a.soc:0,unit:"%"}),s.jsx(i,{className:"show-small",value:l?a.v_bat:0,unit:" Vdc"})]}),s.jsx("div",{className:"arrows row",children:Array.from({length:2}).map((e,r)=>s.jsx("div",{className:`x-arrow ${l?a.p_discharge>0?"right":a.p_charge>0?"left":"none":"none"}`},"batter-arrow-"+r))})]})})}const g=(a,l)=>l?a.p_inv>0?"right":a.p_rec>0?"left":"none":"none";function _({inverterData:a,isSocketConnected:l}){return s.jsx("div",{className:"inverter flex-1",children:s.jsxs("div",{className:"row align-center",children:[s.jsx("img",{src:"/assets/inverter_off_grid_20231003.png"}),s.jsx("div",{className:"flex-1 arrows row justify-flex-end",children:Array.from({length:4}).map((e,r)=>s.jsx("div",{className:`x-arrow ${g(a,l)}`},`inverter-arrow-${r}`))})]})})}function y({inverterData:a,isSocketConnected:l}){const{vacr:e,vacs:r,vact:n,p_to_user:c,p_to_grid:m,fac:j}=a,t=x.useMemo(()=>{if(!l)return 0;const u=(e||r||n)/10;return u>300?0:u},[l,e,r,n]),p=x.useMemo(()=>l?c||m:0,[l,c,m]),h=x.useMemo(()=>l?j/100:0,[j,l]),v=x.useMemo(()=>l?m>0?"right":c>0?"left":"none":"none",[l,m,c]);return s.jsxs("div",{className:"grid flex-1 row align-center justify-flex-end",children:[s.jsx("div",{className:"row arrows",children:Array.from({length:2}).map((u,N)=>s.jsx("div",{className:`x-arrow ${v}`},"grid-arrow-"+N))}),s.jsxs("div",{className:"col align-center",children:[s.jsx(i,{className:"show-small",value:p,unit:" W"}),s.jsx("img",{src:"/assets/icon_grid.png"}),s.jsx(i,{className:"show-small",value:t,unit:" Vac"}),s.jsx(i,{className:"show-small",value:h,unit:" Hz"})]}),s.jsxs("div",{className:"grid-texts",children:[s.jsx(i,{value:p,unit:" W"}),s.jsx(i,{value:t,unit:" Vac"}),s.jsx(i,{value:h,unit:" Hz"})]})]})}function V({inverterData:a,isSocketConnected:l}){const{t:e}=o(),r=a.p_inv+a.p_to_user-a.p_rec;return s.jsx("div",{className:"consumption flex-1",children:s.jsxs("div",{className:"row",children:[s.jsxs("div",{className:"col align-center consumption-icon",children:[s.jsx("div",{className:"arrows col",children:Array.from({length:2}).map((n,c)=>s.jsx("div",{className:`y-arrow ${l&&r>0?"down":"none"}`},"comsumption-arrow-"+c))}),s.jsx("img",{src:"/assets/icon_consumption.png"}),s.jsx(i,{className:"show-small",value:l?r:0,unit:" W"})]}),s.jsxs("div",{className:"consumption-texts",children:[s.jsx(i,{value:l?r:0,unit:" W"}),s.jsx("div",{className:"description",children:e("consumptionPower")})]})]})})}function b({inverterData:a,isSocketConnected:l}){const{t:e}=o(),r=l?a.p_eps:0,n=c=>r===0?s.jsx("strong",{className:`eps-status ${c||""}`,children:e("eps.standby")}):s.jsx(i,{className:c,value:r,unit:" W"});return s.jsx("div",{className:"eps flex-1",children:s.jsxs("div",{className:"row",children:[s.jsxs("div",{className:"col align-center",children:[s.jsx("div",{className:`y-arrow ${r>0?"down":"none"}`}),s.jsx("img",{src:"/assets/icon_eps.png"}),n("show-small")]}),s.jsxs("div",{className:"eps-texts",children:[n(),s.jsx("div",{className:"description",children:e("eps.backupPower")})]})]})})}function W({inverterData:a,isSocketConnected:l,onReconnect:e}){const{t:r}=o();return s.jsxs("div",{className:"card system-information",children:[s.jsxs("div",{className:"system-title",children:[s.jsx("span",{className:"system-title-text",children:r("systemInformation")}),s.jsx("span",{children:a.deviceTime})]}),s.jsxs("div",{className:"system-graph",children:[s.jsxs("div",{className:"system-status row",children:[s.jsxs("div",{className:"system-status-display",title:a.status_text,children:[s.jsx("div",{className:`system-status-icon ${l?a.status!==0?"normal":"fault":"offline"}`}),s.jsx("div",{children:l?a.status!==0?r("normal"):r("fault"):r("offline")})]}),s.jsx("button",{className:"system-status-reconnect",onClick:e,title:r("reconnect"),disabled:l,children:r("reconnect")})]}),s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"flex-1"}),s.jsx(f,{inverterData:a,isSocketConnected:l}),s.jsx("div",{className:"flex-1"})]}),s.jsxs("div",{className:"row",children:[s.jsx(w,{inverterData:a,isSocketConnected:l}),s.jsx(_,{inverterData:a,isSocketConnected:l}),s.jsx(y,{inverterData:a,isSocketConnected:l})]}),s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"flex-1"}),s.jsx(b,{inverterData:a,isSocketConnected:l}),s.jsx(V,{inverterData:a,isSocketConnected:l})]})]})]})}export{W as default};
